<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>출장신청</title>

    <script src="../../js/jquery-1.8.0.min.js"></script>
    <script src="../../js/bootstrap-datepicker.min.js"></script>
    <script src="../../js/bootstrap-datepicker.ko.min.js"></script>
    <script src="../../js/common.js"></script>
    <script src="../../js/cap.js"></script>

    <link rel="stylesheet" href="../../css/cap.css">
    <link rel="stylesheet" href="../../css/bootstrap-datepicker.css" />
    <link rel="stylesheet" href="../../css/style_new.css">

    <script>
    jQuery(function ($) { 
        // 페이지 로드 즉시 실행
        if (typeof Loader !== 'undefined') {
            Loader.start();
            
            // 테스트를 위해 2초 후 종료 시뮬레이션
            setTimeout(function() {
                Loader.complete();
                console.log("로딩 완료 테스트");
            }, 1000);
        }
    });
    </script>
</head>
<body class="sub-page">
    
    <div class="app-shell">
        <header class="app-header">
            <button class="icon-button prev" type="button" aria-label="이전 페이지로 이동"></button>
            <h1 class="title">출장신청</h1>
            <button class="icon-button menu" type="button" aria-label="전체 메뉴 열기" aria-haspopup="true" aria-expanded="false" aria-controls="main-menu" data-menu-toggle></button>
        </header>

        <main class="content fn-height form-content">
            <form class="apply-form" action="#" method="post">
                <div class="form-row">
                    <label class="form-label" for="trip-group">출장유형</label>
                    <div class="input-wrap select">
                        <select id="trip-group" name="trip-group" aria-label="출장유형 선택">
                            <option value="">선택하세요</option>
                        </select>
                        <span class="icon icon-caret" aria-hidden="true"></span>
                    </div>
                </div>

                <div class="form-row">
                    <label class="form-label" for="trip-cate">출장구분</label>
                    <div class="input-wrap select">
                        <select id="trip-cate" name="trip-cate" aria-label="출장구분 선택">
                            <option value="">선택하세요</option>
                        </select>
                        <span class="icon icon-caret" aria-hidden="true"></span>
                    </div>
                </div>

                <div class="form-row">
                    <label class="form-label">기간</label>
                    <div class="date-row">
                        <div class="input-wrap date">
                            <input type="text" name="start-date" class="datepicker" aria-label="시작일" placeholder="YYYY.MM.DD" readonly="readonly">
                        </div>
                        <span class="date-tilde" aria-hidden="true">~</span>
                        <div class="input-wrap date">
                            <input type="text" name="end-date" class="datepicker" aria-label="종료일" placeholder="YYYY.MM.DD" readonly="readonly">
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <label class="form-label" for="trip-place">출장지</label>
                    <div class="input-wrap input">
                        <input type="text" id="trip-place" placeholder="출장지를 입력하세요">
                    </div>
                </div>

                <div class="form-row">
                    <label class="form-label" for="trip-content">출장내용</label>
                    <div class="input-wrap input">
                        <textarea id="trip-content" placeholder="출장내용을 입력하세요"></textarea>
                    </div>
                </div>

                <div class="form-row divider">
                    <label class="form-label">비용집계대상</label>
                    <div class="input-wrap group">
                        <div class="pill-radio-group" role="radiogroup" aria-label="비용집계대상 선택">
                            <label class="pill-radio">
                                <input type="radio" name="cost-type" checked>
                                <span class="pill-radio-label">비용(WBS)</span>
                            </label>
                            <label class="pill-radio">
                                <input type="radio" name="cost-type">
                                <span class="pill-radio-label">자본</span>
                            </label>
                        </div>
                        <div class="search-input-group">
                            <div class="input-wrap text">
                                <input id="cost-code-input" type="text" name="code" aria-label="선택된 비용 코드" placeholder="코드를 검색하세요" readonly>
                            </div>
                            <button class="icon-button search fn-modal-open" type="button" aria-label="비용 코드 검색 창 열기" data-target="costCode"></button>
                        </div>
                        <span class="text result">코드명 : <em><span class="blind">선택된 코드 번호:</span>00348568</em></span>
                    </div>
                </div>

                <div class="form-row divider">
                    <label class="form-label">관련사항
                        <button class="icon-button sm info fn-modal-open" type="button" aria-label="관련사항 안내" aria-haspopup="dialog" data-target="infoModal"></button>
                    </label>

                    <div class="pill-check-group" role="group" aria-label="출장 유형 다중 선택">
                        <label class="pill-check">
                            <input type="checkbox" name="trip-type" checked>
                            <span class="pill-check-label">자기차량이용</span>
                        </label>
                        <label class="pill-check">
                            <input type="checkbox" name="trip-type">
                            <span class="pill-check-label">집행기관수행</span>
                        </label>
                        <label class="pill-check">
                            <input type="checkbox" name="trip-type">
                            <span class="pill-check-label">공사차량이용</span>
                        </label>
                        <label class="pill-check">
                            <input type="checkbox" name="trip-type">
                            <span class="pill-check-label">이동숙박</span>
                        </label>
                        <label class="pill-check if-check">
                            <input type="checkbox" name="trip-type">
                            <span class="pill-check-label">운전여비지급</span>
                            <div class="input-wrap select checked">
                                <select id="allowance" name="allowance" aria-label="운전여비지급 상세선택">
                                    <option value="">선택하세요</option>
                                </select>
                                <span class="icon icon-caret" aria-hidden="true"></span>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="form-row divider">
                    <label class="form-label">기타비용 가감</label>
                    <div class="input-wrap">
                        <span class="text result">합계 : <em>45,000원</em></span>
                        <button class="icon-button add fn-modal-open" type="button" aria-label="기타비용 추가" data-target="otherExpensesModal"></button>
                    </div>
                </div>

                <div class="form-row divider">
                    <label class="form-label">결재자</label>
                    <button class="icon-button add fn-modal-open" type="button" aria-label="결재자 추가" data-target="approverModal"></button>
                </div>
                
                <div class="form-row approver-row">
                    <div class="approver-search">
                        
                        <div class="approver-form-wrap">
                            <div class="grid-row row-1">
                                <div class="input-wrap select">
                                    <select aria-label="결재타입 선택">
                                        <option value="">입력/상신</option>
                                    </select>
                                    <span class="icon icon-caret" aria-hidden="true"></span>
                                </div>
                                <div class="input-wrap text">
                                    <input id="submit" type="text" name="submit" aria-label="상신자" value="정광본" readonly="readonly">
                                </div>
                            </div>

                            <div class="grid-row row-2">
                                
                                <div class="input-wrap select">
                                    <select aria-label="결재타입 선택">
                                        <option value="">결재</option>
                                    </select>
                                    <span class="icon icon-caret" aria-hidden="true"></span>
                                </div>
                                <div class="input-wrap text">
                                    <input id="approver" type="text" name="approver" aria-label="결재자" value="나구열 팀장" readonly="readonly">
                                </div>
                                <button class="icon-button search fn-modal-open" type="button" aria-label="결재자 검색" data-target="approverModal"></button>
                                <button class="icon-button remove" type="button" aria-label="결재자 삭제"></button>
                            </div>
                        </div>
                        <p class="help-text">최근 결재자가 기본으로 표시됩니다.</p>
                    </div>
                </div>

                

            </form>
        </main>

        <div class="footer-action" role="group" aria-label="하단 액션 메뉴">
            <button class="action-button global" type="button">결재상신</button>
            <button class="action-button primary" type="button">저장</button>
        </div>

        <aside class="menu-panel" id="main-menu" aria-label="전체 메뉴" role="dialog" aria-modal="true" aria-hidden="true">
            <div class="menu-hero">
                <div class="menu-hero-content">
                    <p class="menu-subtitle">ESS Mobile</p>
                </div>
                <button class="menu-close" type="button" aria-label="메뉴 닫기" data-menu-close></button>
            </div>
            <nav class="menu-body">
                <ul class="menu-list">
                    <li>
                        <a class="menu-item home" href="#">
                            <span class="menu-label">Home</span>
                        </a>
                    </li>
                    <li>
                        <a class="menu-item atten active" href="#" aria-current="page">
                            <span class="menu-label">근태 내역</span>
                        </a>
                    </li>
                    <li>
                        <a class="menu-item trip" href="#">
                            <span class="menu-label">출장 내역</span>
                        </a>
                    </li>
                    <li>
                        <a class="menu-item overtime" href="#">
                            <span class="menu-label">시간외 근무내역</span>
                        </a>
                        <ul class="menu-children">
                            <li><a class="menu-item" href="#">시간외 신청</a></li>
                            <li><a class="menu-item" href="#">선택근로 실적 입력</a></li>
                        </ul>
                    </li>
                    <li>
                        <a class="menu-item event" href="#">
                            <span class="menu-label">경조금</span>
                        </a>
                    </li>
                    <li>
                        <a class="menu-item faq" href="#">
                            <span class="menu-label">복무관리 FAQ</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <div id="costCode" class="modal" role="dialog" aria-modal="true" aria-labelledby="costCodeTitle" aria-hidden="true">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="costCodeTitle">비용(WBS) 코드 조회</h2>
                    <button class="modal-close fn-modal-close" type="button" aria-label="모달 닫기"></button>
                </div>
                <div class="modal-body">
                    <div class="search-field">
                        <div class="search-input-group">
                            <label class="form-label" for="search-category">검색구분</label>
                            <div class="input-wrap select">
                                <select id="search-category" aria-label="검색구분" autofocus>
                                    <option value="">1.자산-부서로 검색</option>
                                </select>
                                <span class="icon icon-caret" aria-hidden="true"></span>
                            </div>
                        </div>
                        <div class="search-input-group">
                            <label class="form-label" for="dept">부서검색</label>
                            <div class="input-wrap text">
                                <input id="dept" type="text" name="approver" aria-label="부서" placeholder="부서를 검색하세요" readonly>
                            </div>
                            <button class="icon-button search fn-modal-open" type="button" aria-label="부서 검색" data-target="deptModal"></button>
                        </div>
                        <button class="btn search" type="button" aria-label="조회">조회</button>
                    </div>

                    <p class="note">총 3건이 검색되었습니다.</p>
                    <ul class="search-result flex-colum">
                        <li>
                            <a href="javascript:void(0)" class="search-result-item fn-modal-close">
                                <span class="number">000037463269</span>
                                <span class="name">모바일코비스개선 / IT개발운영팀</span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0)" class="search-result-item fn-modal-close">
                                <span class="number">000037463269</span>
                                <span class="name">SW개발비 / 2024편성제작정보시스템기능개선사업 IT개발운영팀</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div id="infoModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="infoModalTitle" aria-hidden="true">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="infoModalTitle">관련사항 안내</h2>
                    <button class="modal-close fn-modal-close" type="button" aria-label="모달 닫기"></button>
                </div>
                <div class="modal-body">
                    <div class="info-list-wrap">
                        <dl class="info-list-item">
                            <dt>지근거리 출장</dt>
                            <dd>(왕복 2km이내) 관내출장에 따른 여비(일비, 식비, 숙박비 등)을 지급하지 않음 (단, 실비 정산 가능)</dd>
                        </dl>
                        <dl class="info-list-item">
                            <dt>자기차량이용</dt>
                            <dd>(왕복 2km이내) 관내출장에 따른 여비(일비, 식비, 숙박비 등)을 지급하지 않음</dd>
                        </dl>
                        <dl class="info-list-item">
                            <dt>집행기관 수행</dt>
                            <dd>(왕복 2km이내) 관내출장에 따른 여비(일비, 식비, 숙박비 등)을 지급하지 않음</dd>
                        </dl>
                        <dl class="info-list-item">
                            <dt>공사차량 이용</dt>
                            <dd>(왕복 2km이내) 관내출장에 따른 여비(일비, 식비, 숙박비 등)을 지급하지 않음</dd>
                        </dl>
                        <dl class="info-list-item">
                            <dt>이동숙박</dt>
                            <dd>(왕복 2km이내) 관내출장에 따른 여비(일비, 식비, 숙박비 등)을 지급하지 않음</dd>
                        </dl>
                        <dl class="info-list-item">
                            <dt>운전여비 지급</dt>
                            <dd>(왕복 2km이내) 관내출장에 따른 여비(일비, 식비, 숙박비 등)을 지급하지 않음</dd>
                        </dl>
                        <p class="info-text">전체일수가 아닌 특정일수 만큼 위의 내용이 적용되는 경우 기타비용으로 가감 (예, 5일 중 3일만 이동숙박)</p>
                    </div>
                </div>
            </div>
        </div>
        

        <div id="approverModal" class="modal approver-modal" role="dialog" aria-modal="true" aria-labelledby="approverModalTitle" aria-hidden="true">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="approverModalTitle">결재자 조회</h2>
                    <button class="modal-close fn-modal-close" type="button" aria-label="결재자 조회 팝업 닫기"></button>
                </div>
                <div class="modal-body">
                    <div class="search-field">
                        <div class="search-input-group">
                            <div class="input-wrap text">
                                <label for="approver-search" class="blind">검색할 결재자 이름</label>
                                <input id="approver-search" type="text" placeholder="이름으로 검색하세요" autofocus>
                            </div>
                            <button class="icon-button search" type="button" aria-label="검색 실행"></button>
                        </div>
                    </div>
                    <p class="note" aria-live="polite">총 3건이 검색되었습니다.</p>
                    <ul class="search-result">
                        <li>
                            <a href="#" class="search-result-item fn-modal-close" aria-label="나구열 팀장 선택">
                                <span class="number">0987654</span>
                                <span class="name">나구열 팀장</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="search-result-item fn-modal-close" aria-label="홍길동 차장 선택">
                                <span class="number">0987654</span>
                                <span class="name">홍길동 차장</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="search-result-item fn-modal-close" aria-label="이민수 과장 선택">
                                <span class="number">0987654</span>
                                <span class="name">이민수 과장</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div id="deptModal" class="modal approver-modal" role="dialog" aria-modal="true" aria-labelledby="deptModalTitle" aria-hidden="true">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="deptModalTitle">부서 조회</h2>
                    <button class="modal-close fn-modal-close" type="button" aria-label="모달 닫기"></button>
                </div>
                <div class="modal-body">
                    <div class="search-field">
                        <div class="search-input-group">
                            <div class="input-wrap text">
                                <input type="text" name="dept" aria-label="부서" placeholder="부서명을 검색하세요" autofocus>
                            </div>
                            <button class="icon-button search" type="button" aria-label="부서 검색"></button>
                        </div>
                    </div>
                    <p class="note">총 3건이 검색되었습니다.</p>
                    <ul class="search-result">
                        <li>
                            <a href="javascript:void(0)" class="search-result-item fn-modal-close">
                                <span class="number">0987654</span>
                                <span class="name">경영정보부</span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0)" class="search-result-item fn-modal-close">
                                <span class="number">0987654</span>
                                <span class="name">홍길동 차장</span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0)" class="search-result-item fn-modal-close">
                                <span class="number">0987654</span>
                                <span class="name">이민수 과장</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</body>
</html>