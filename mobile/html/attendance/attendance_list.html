<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>근태내역</title>

    <script src="../../js/jquery-1.8.0.min.js"></script>
    <script src="../../js/common_new.js"></script>
    <script src="../../js/cap.js"></script>

    <link rel="stylesheet" href="../../css/cap.css">
    <link rel="stylesheet" href="../../css/style_new.css">

    <script>
    jQuery(function ($) { 
        // 페이지 로드 즉시 실행
        if (typeof Loader !== 'undefined') {
            Loader.start();
            
            // 테스트를 위해 2초 후 종료 시뮬레이션
            setTimeout(function() {
                Loader.complete();
                console.log("로딩 완료 테스트");
            }, 1000);
        }
    });
    </script>
</head>
<body class="sub-page">
    <div class="app-shell">

        <header class="app-header">
            <button class="icon-button home" type="button" aria-label="메인 화면으로 이동"></button>
            <h1 class="title">근태내역</h1>
            <button class="icon-button menu" type="button" aria-label="전체 메뉴 열기" aria-haspopup="true" aria-expanded="false" aria-controls="main-menu" data-menu-toggle></button>
        </header>

        <main class="content fn-height list-content">

            <!-- <section class="summary-wrap attendance" aria-labelledby="attendance-summary-title">
                <h2 id="attendance-summary-title" class="blind">연차 및 장기근속 휴가 현황</h2>
                <div class="fn-tabs" role="tablist">
                    <button class="tab-button active" type="button" role="tab" aria-selected="true" aria-controls="panel-annual" data-tab="annual">
                        <span>연차휴가</span>
                        <span class="value">10.0</span>
                    </button>
                    <button class="tab-button" type="button" role="tab" aria-selected="false" aria-controls="panel-long-term" data-tab="long-term">
                        <span>대휴</span>
                        <span class="value">10.0</span>
                    </button>
                    <button class="tab-button" type="button" role="tab" aria-selected="false" aria-controls="panel-long-term" data-tab="long-term">
                        <span>장기근속 15년</span>
                        <span class="value">10.0</span>
                    </button>
                    <button class="tab-button" type="button" role="tab" aria-selected="false" aria-controls="panel-long-term" data-tab="long-term">
                        <span>장기근속 20년</span>
                        <span class="value">10.0</span>
                    </button>
                </div>

                <div id="panel-annual" class="tab-content active" role="tabpanel" data-tab-content="annual" aria-labelledby="tab-annual">
                    <div class="summary-stats">
                        <div class="summary-stat">
                            <div class="counter blue">21</div>
                            <div class="summary-label">발생일수</div>
                        </div>
                        <div class="summary-stat">
                            <div class="counter blue">21.0</div>
                            <div class="summary-label">미보상</div>
                        </div>
                        <div class="summary-stat">
                            <div class="counter purple">11.0</div>
                            <div class="summary-label">사용</div>
                        </div>
                        <div class="summary-stat">
                            <div class="counter green">10.0</div>
                            <div class="summary-label">잔여</div>
                        </div>
                    </div>
                    <p class="summary-subtext">휴가사용가능 기간: <time datetime="2025-08-01">2025/08/01</time> ~ <time datetime="2026-07-31">2026/07/31</time></p>
                </div>

                <div id="panel-long-term" class="tab-content" role="tabpanel" data-tab-content="long-term" aria-labelledby="tab-long-term">
                    <div class="summary-stats">
                        <div class="summary-stat">
                            <div class="counter blue">10</div>
                            <div class="summary-label">발생일수</div>
                        </div>
                        <div class="summary-stat">
                            <div class="counter purple">2</div>
                            <div class="summary-label">사용</div>
                        </div>
                        <div class="summary-stat">
                            <div class="counter green">8</div>
                            <div class="summary-label">잔여</div>
                        </div>
                    </div>
                    <p class="summary-subtext">휴가사용가능 기간: <time datetime="2025-08-01">2025/08/01</time> ~ <time datetime="2026-07-31">2026/07/31</time></p>
                </div>
            </section> -->

            
            <!-- tab-content 하나만 있고 내부 데이터만 바뀌는 구조 -->
            <section class="summary-wrap attendance" aria-labelledby="attendance-summary-title" id="list_info2">
                <h2 id="attendance-summary-title" class="blind">연차 및 장기근속 휴가 현황</h2>
                <div class="tabs" role="tablist" id="list_tab2">
                    <button class="tab-button active" type="button">
                        <span>연차휴가</span>
                        <span class="value">10.0 </span>
                    </button>
                    
                    <button class="tab-button" type="button" >
                        <span>장기근속(10년)</span>
                        <span class="value">10.0 </span>
                    </button>

                    <button class="tab-button" type="button">
                        <span>연차휴가</span>
                        <span class="value">10.0 </span>
                    </button>
                    
                    <button class="tab-button" type="button" >
                        <span>장기근속(10년)</span>
                        <span class="value">10.0 </span>
                    </button>
                </div>
                <div class="tab-content active">
                     <div class="summary-stats">
                        <div class="summary-stat">
                            <div class="counter blue">21</div>
                            <div class="summary-label">발생일수</div>
                        </div>
                        <div class="summary-stat">
                            <div class="counter blue">21.0</div>
                            <div class="summary-label">미보상</div>
                        </div>
                        <div class="summary-stat">
                            <div class="counter purple">11.0</div>
                            <div class="summary-label">사용</div>
                        </div>
                        <div class="summary-stat">
                            <div class="counter green">10.0</div>
                            <div class="summary-label">잔여</div>
                        </div>
                    </div>
                    <p class="summary-subtext">휴가사용가능 기간: <time datetime="2025-08-01">2025/08/01</time> ~ <time datetime="2026-07-31">2026/07/31</time></p>
                </div>
            </section>

            <section class="list-wrap" aria-labelledby="list-title">
                <p id="list-title" class="note">최근 1년간 근태내역입니다.</p>
                <ul class="item-list">
                    <li class="item-card">
                        <a href="javascript:void(0);">
                            <div class="item-top">
                                <div class="item-left">
                                    <span class="status waiting">대기</span>
                                   <div class="item-title">연차 <span class="blind">기간:</span> <span>1일</span></div>
                                </div>
                            </div>
                            <div class="item-subtext">
                                <time datetime="2025-09-22">2025/09/22</time> ~ <time datetime="2025-09-22">2025/09/22</time>
                            </div>
                        </a>
                    </li>

                    <li class="item-card">
                        <a href="javascript:void(0);">
                            <div class="item-top">
                                <div class="item-left">
                                    <span class="status pending">신청</span>
                                    <div class="item-title">반일연차휴가(오후)<span>1일</span></div>
                                </div>
                            </div>
                            <div class="item-subtext">
                                <time datetime="2025-09-22">2025/09/22</time> ~ <time datetime="2025-09-22">2025/09/22</time>
                            </div>
                        </a>
                    </li>

                    <li class="item-card">
                        <a href="javascript:void(0);">
                            <div class="item-top">
                                <div class="item-left">
                                    <span class="status pending">신청</span>
                                    <div class="item-title">대휴<span>2일</span></div>
                                </div>
                            </div>
                            <div class="item-subtext">
                                <time datetime="2025-09-22">2025/09/22</time> ~ <time datetime="2025-09-22">2025/09/22</time>
                            </div>
                        </a>
                    </li>

                    <li class="item-card">
                        <a href="javascript:void(0);">
                            <div class="item-top">
                                <div class="item-left">
                                    <span class="status approved">승인</span>
                                    <div class="item-title">연차<span>4일</span></div>
                                </div>
                            </div>
                            <div class="item-subtext">
                                <time datetime="2025-09-22">2025/09/22</time> ~ <time datetime="2025-09-22">2025/09/22</time>
                            </div>
                        </a>
                    </li>

                    <li class="item-card">
                        <a href="javascript:void(0);">
                            <div class="item-top">
                                <div class="item-left">
                                    <span class="status approved">승인</span>
                                    <div class="item-title">연차<span>1일</span></div>
                                </div>
                            </div>
                            <div class="item-subtext">
                                <time datetime="2025-09-22">2025/09/22</time> ~ <time datetime="2025-09-22">2025/09/22</time>
                            </div>
                        </a>
                    </li>

                    <li class="item-card">
                        <a href="javascript:void(0);">
                            <div class="item-top">
                                <div class="item-left">
                                    <span class="status approved">승인</span>
                                    <div class="item-title">연차<span>1일</span></div>
                                </div>
                            </div>
                            <div class="item-subtext">
                                <time datetime="2025-09-22">2025/09/22</time> ~ <time datetime="2025-09-22">2025/09/22</time>
                            </div>
                        </a>
                    </li>
                </ul>
            </section>
        </main>

        <div class="footer-action" role="group" aria-label="하단 액션 메뉴">
            <button class="action-button primary" type="button">근태신청</button>
            <button class="action-button global" type="button">목록으로</button>
            <button class="action-button cancel" type="button">취소</button>
        </div>

        <aside class="menu-panel" id="main-menu" aria-label="전체 메뉴" role="dialog" aria-modal="true" aria-hidden="true">
            <div class="menu-hero">
                <div class="menu-hero-content">
                    <p class="menu-subtitle">ESS Mobile</p>
                </div>
                <button class="menu-close" type="button" aria-label="메뉴 닫기" data-menu-close></button>
            </div>
            <nav class="menu-body">
                <ul class="menu-list">
                    <li>
                        <a class="menu-item home" href="#">
                            <span class="menu-label">Home</span>
                        </a>
                    </li>
                    <li>
                        <a class="menu-item atten active" href="#" aria-current="page">
                            <span class="menu-label">근태 내역</span>
                        </a>
                    </li>
                    <li>
                        <a class="menu-item trip" href="#">
                            <span class="menu-label">출장 내역</span>
                        </a>
                    </li>
                    <li>
                        <a class="menu-item overtime" href="#">
                            <span class="menu-label">시간외 근무내역</span>
                        </a>
                        <ul class="menu-children">
                            <li><a class="menu-item" href="#">시간외 신청</a></li>
                            <li><a class="menu-item" href="#">선택근로 실적 입력</a></li>
                        </ul>
                    </li>
                    <li>
                        <a class="menu-item event" href="#">
                            <span class="menu-label">경조금</span>
                        </a>
                    </li>
                    <li>
                        <a class="menu-item faq" href="#">
                            <span class="menu-label">복무관리 FAQ</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>
    </div>
    <script>
    jQuery(function ($) {
    // 1. 상태 업데이트 및 중앙 정렬 함수
    function refreshTabScroll($btn, isClick) {
        var $container = $btn.closest('.tab-scroll'); // 이미 클래스가 있는 경우
        if (!$container.length) $container = $btn.parent(); // 없으면 직계 부모

        var el = $container.get(0);
        if (!el) return;

        // 클래스 부여 및 오버플로우 체크
        var hasOverflow = el.scrollWidth > el.clientWidth + 1;
        $container.addClass('tab-scroll').toggleClass('has-overflow', hasOverflow);

        // 클릭해서 호출된 경우에만 중앙 정렬 애니메이션 실행
        if (isClick && hasOverflow) {
            var targetLeft = $btn[0].offsetLeft + ($btn[0].offsetWidth / 2) - (el.clientWidth / 2);
            var maxScroll = el.scrollWidth - el.clientWidth;
            $container.stop().animate({ 
                scrollLeft: Math.max(0, Math.min(targetLeft, maxScroll)) 
            }, 250);
        }
    }

    // 초기 로드 시: 모든 활성화된 탭에 대해 실행
    $('.tab-button.active').each(function() {
        if (!$(this).closest('.fn-tabs').length) {
            refreshTabScroll($(this), false);
        }
    });

    // 클릭 시: 클래스 변경 및 정렬
    $(document).on('click', '.tab-button', function () {
        var $btn = $(this);
        if ($btn.closest('.fn-tabs').length) return;

        $btn.addClass('active').siblings('.tab-button').removeClass('active');
        refreshTabScroll($btn, true);
    });

    // 리사이즈 시: 오버플로우 다시 계산
    $(window).on('resize', function() {
        $('.tab-scroll').each(function() {
            var hasOverflow = this.scrollWidth > this.clientWidth + 1;
            $(this).toggleClass('has-overflow', hasOverflow);
        });
    });
});
    </script>
</body>
</html>